pipeline {
   agent any

   environment {
       AWS_DEFAULT_REGION = 'us-east-1'
       AWS_ACCESS_KEY_ID = credentials('aws-access-key-id')
       AWS_SECRET_ACCESS_KEY = credentials('aws-secret-access-key')
   }

   stages {
       stage('Checkout') {
           steps {
               checkout scm
           }
       }

       stage('Deploy CloudFormation') {
           steps {
               script {
                   def stackName = 'MyCloudFormationStack'
                   def templateFile = 'path/to/your/cloudformation-template.yml'

                   sh """
                       aws cloudformation deploy \\
                           --region \$AWS_DEFAULT_REGION \\
                           --template-file \$templateFile \\
                           --stack-name \$stackName \\
                           --capabilities CAPABILITY_IAM
                   """
               }
           }
       }
   }
}